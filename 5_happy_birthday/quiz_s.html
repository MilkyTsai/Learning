<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Logic Challenge</title>
    <style>
        :root {
            --girl-pink: #ff85a2;
            --sky-blue: #7bd5f5;
            --star-yellow: #fdfa66;
        }
        body {
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            background: linear-gradient(135deg, #fff5f7 0%, #eef9ff 100%);
            display: flex; justify-content: center; align-items: center;
            height: 100vh; margin: 0; overflow: hidden;
        }
        #game-container {
            background: white; padding: 30px; border-radius: 40px;
            box-shadow: 0 15px 35px rgba(255, 133, 162, 0.2);
            text-align: center; max-width: 550px; width: 95%;
            border: 6px solid var(--girl-pink);
        }
        .screen { display: none; }
        .active { display: block; }
        
        button {
            background: var(--girl-pink); color: white;
            border: none; padding: 15px 40px; font-size: 26px;
            border-radius: 50px; cursor: pointer; transition: 0.2s;
            margin: 10px; box-shadow: 0 5px 0 #d66d86;
        }
        button:active { transform: translateY(3px); box-shadow: none; }

        .option-btn {
            display: block; width: 100%; background: #fff;
            color: #444; font-size: 24px; margin: 12px 0;
            border: 3px solid var(--sky-blue); border-radius: 25px;
            padding: 12px;
        }
        .option-btn:hover { background: var(--sky-blue); color: white; border-color: #5ab8d8; }

        .illustration { font-size: 90px; margin: 15px 0; }
        h2 { color: #ff5e78; font-size: 28px; line-height: 1.4; }
        .progress { font-size: 18px; color: #888; margin-bottom: 10px; }
    </style>
</head>
<body>

<div id="game-container">
    <div id="start-screen" class="screen active">
        <h2 style="font-size: 36px;">Birthday Game! ğŸ‚</h2>
        <div class="illustration">ğŸâœ¨</div>
        <p>è½è½çœ‹é¡Œç›®ï¼Œé¸å‡ºæ­£ç¢ºçš„å‹•ä½œï¼</p>
        <button onclick="startGame()">Start! é–‹å§‹</button>
    </div>

    <div id="quiz-screen" class="screen">
        <div id="progress-bar" class="progress">Question 1 / 5</div>
        <h2 id="question-text">Question</h2>
        <div id="q-illustration" class="illustration">â“</div>
        <div id="options-container"></div>
    </div>
</div>

<div id="victory-modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.98); flex-direction:column; justify-content:center; align-items:center; z-index:100;">
    <h1 style="font-size: 50px; color: var(--girl-pink);">You are amazing!</h1>
    <h2 style="font-size: 40px; color: #555;">ä½ çœŸæ£’ï¼</h2>
    <div style="font-size: 120px;">ğŸ‰ğŸ‘‘ğŸ€</div>
    <button onclick="location.reload()">å†ç©ä¸€æ¬¡ Play Again</button>
</div>

<audio id="sound-ding" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="sound-error" src="https://assets.mixkit.co/active_storage/sfx/1001/1001-preview.mp3"></audio>
<audio id="sound-mario" src="https://dl.vgmdownloads.com/soundtracks/super-mario-bros/shvcrevofp/18%20-%20Course%20Clear.mp3"></audio>

<script>
// é‡æ–°è¨­å®šå…·æœ‰ã€Œé‚è¼¯è¯æƒ³ã€çš„é¡Œç›®
const quizData = [
    { 
        q: "If you want to sing a song, what do you do with your hands?", 
        qZh: "å¦‚æœä½ æƒ³å”±æ­Œï¼Œä½ è¦ç”¨æ‰‹åšä»€éº¼å‘¢ï¼Ÿ",
        options: ["Clap your hands", "Jump around", "Close eyes", "Sleep"], 
        correct: 0, icon: "ğŸ‘", zh: "æ‹æ‹æ‰‹" 
    },
    { 
        q: "If you want to touch the blue sky, what do you do?", 
        qZh: "å¦‚æœä½ æƒ³æ‘¸åˆ°è—è—çš„å¤©ç©ºï¼Œä½ è¦æ€éº¼åšï¼Ÿ",
        options: ["Sit down", "Reach up high", "Run away", "Shake legs"], 
        correct: 1, icon: "â˜ï¸", zh: "èˆ‰é«˜é«˜" 
    },
    { 
        q: "If you want to make a funny sound, what do you do?", 
        qZh: "å¦‚æœä½ æƒ³ç™¼å‡ºæœ‰è¶£çš„è²éŸ³ï¼Œä½ è¦åšä»€éº¼å‹•ä½œï¼Ÿ",
        options: ["Close mouth", "Jump around", "Eat cake", "Read book"], 
        correct: 1, icon: "ğŸ¤ª", zh: "è·³ä¸€è·³" 
    },
    { 
        q: "If you want to play a beat, what do you do with your feet?", 
        qZh: "å¦‚æœä½ æƒ³æ‰“æ‹å­ï¼Œä½ è¦ç”¨è…³åšä»€éº¼å‘¢ï¼Ÿ",
        options: ["Wave hands", "Stomp your feet", "Wash face", "Point nose"], 
        correct: 1, icon: "ğŸ‘£", zh: "è·ºè·ºè…³" 
    },
    { 
        q: "If you want to move your body, what do you do with your legs?", 
        qZh: "å¦‚æœä½ æƒ³å‹•å‹•èº«é«”ï¼Œä½ è¦å°ä½ çš„è…¿åšä»€éº¼ï¼Ÿ",
        options: ["Shake your legs", "Touch ears", "Close eyes", "Clap hands"], 
        correct: 0, icon: "ğŸ¦µ", zh: "æ–æ–è…¿" 
    }
];

let currentQ = 0;
let canHover = false;
const synth = window.speechSynthesis;

function stopAndSpeak(text, lang = 'en-US', callback) {
    synth.cancel();
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = lang;
    utter.rate = 0.85;
    if (callback) utter.onend = callback;
    synth.speak(utter);
}

function playSound(id) {
    const s = document.getElementById(id);
    s.pause(); s.currentTime = 0; s.play();
    if (id === 'sound-error') {
        setTimeout(() => { s.pause(); s.currentTime = 0; }, 600);
    }
}

function startGame() {
    document.getElementById('start-screen').classList.remove('active');
    document.getElementById('quiz-screen').classList.add('active');
    loadQuestion();
}

function loadQuestion() {
    canHover = false;
    const data = quizData[currentQ];
    document.getElementById('progress-bar').innerText = `Question ${currentQ + 1} / 5`;
    document.getElementById('question-text').innerText = data.q;
    document.getElementById('q-illustration').innerText = data.icon;
    
    const container = document.getElementById('options-container');
    container.innerHTML = '';
    
    data.options.forEach((opt, index) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.innerText = opt;
        btn.onmouseover = () => { if(canHover) stopAndSpeak(opt); };
        btn.onclick = () => checkAnswer(index);
        container.appendChild(btn);
    });

    // æœ—è®€è‹±æ–‡é¡Œç›® -> æœ—è®€ä¸­æ–‡é¡Œç›® -> å¿µå®Œæ‰å¯ hover
    stopAndSpeak(data.q, 'en-US', () => {
        stopAndSpeak(data.qZh, 'zh-TW', () => {
            canHover = true;
        });
    });
}

function checkAnswer(idx) {
    if(!canHover) return;
    const data = quizData[currentQ];
    if(idx === data.correct) {
        canHover = false;
        playSound('sound-ding');
        
        const answerText = data.options[idx];
        stopAndSpeak(answerText, 'en-US', () => {
            stopAndSpeak(answerText, 'en-US', () => {
                stopAndSpeak(answerText, 'en-US', () => {
                    stopAndSpeak(data.zh, 'zh-TW', () => {
                        currentQ++;
                        if(currentQ < quizData.length) {
                            setTimeout(loadQuestion, 800);
                        } else {
                            showVictory();
                        }
                    });
                });
            });
        });
    } else {
        playSound('sound-error');
    }
}

function showVictory() {
    document.getElementById('victory-modal').style.display = 'flex';
    stopAndSpeak("You are amazing!", 'en-US', () => {
        stopAndSpeak("ä½ çœŸæ£’ï¼", 'zh-TW', () => {
            playSound('sound-mario');
        });
    });
}
</script>
</body>
</html>