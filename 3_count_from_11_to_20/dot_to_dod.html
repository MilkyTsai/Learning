<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>å¯æ„›è²“å’ªæ‹–æ›³é€£ç·šéŠæˆ²-ä¿®æ­£ç‰ˆ</title>
    <style>
        body { font-family: "Microsoft JhengHei", Arial, sans-serif; background-color: #fcf8f3; text-align: center; margin: 0; padding: 20px; }
        h1 { color: #e76f51; }
        .game-container {
            width: 1400px; height: 750px; 
            margin: 10px auto; background: white; 
            border: 8px solid #f4a261; border-radius: 35px; position: relative; overflow: hidden;
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
        }
        svg { width: 100%; height: 100%; display: block; user-select: none; }
        .dot { fill: #2a9d8f; stroke: white; stroke-width: 3; cursor: grab; }
        .dot:hover { fill: #264653; r: 18; }
        .dot.current-start { fill: #e9c46a; r: 18; cursor: grabbing; }
        .dot.done { fill: #f4a261; r: 10; }
        .num-text { font-size: 22px; font-weight: bold; fill: #264653; pointer-events: none; }
        .line-segment { stroke: #e76f51; stroke-width: 10; stroke-linecap: round; fill: none; }
        .temp-line { stroke: #264653; stroke-width: 4; stroke-dasharray: 8; fill: none; opacity: 0.5; pointer-events: none; }
        #start-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.95); z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .btn-big { padding: 25px 80px; font-size: 30px; background: #e76f51; color: white; border: none; border-radius: 60px; cursor: pointer; box-shadow: 0 8px #d1495b; }
        #cat-final { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 180px; display: none; pointer-events: none; }
    </style>
</head>
<body>

    <h1>ğŸ¾ å¯æ„›è²“å’ªé€£é€£çœ‹ (é»ä½ä¿®æ­£ç‰ˆ) ğŸ¾</h1>
    <p>é»æ“Šæ•¸å­—è½ç™¼éŸ³ï¼Œå¾é»ƒè‰²é»ã€Œæ‹–æ›³ã€åˆ°ä¸‹ä¸€å€‹æ•¸å­—ä¾†é€£ç·šï¼</p>

    <div class="game-container" id="gameArea">
        <div id="start-overlay">
            <button class="btn-big" onclick="startGame()">é»æˆ‘é–‹å§‹éŠæˆ² â”</button>
        </div>
        
        <div id="cat-final">ğŸ˜»</div> 
        <svg id="gameSvg" viewBox="0 0 1400 750">
            <g id="lineLayer"></g>
            <line id="dragLine" class="temp-line" x1="0" y1="0" x2="0" y2="0" style="display:none;"/>
        </svg>
    </div>

    <button class="btn-big" style="margin-top:20px; font-size:20px; padding:10px 40px; background:#2a9d8f; box-shadow: 0 4px #264653;" onclick="window.location.reload()">é‡æ–°æŒ‘æˆ° ğŸ”„</button>

    <script>
        const words = ["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty"];
        
        // --- é‡æ–°æ’åˆ—åº§æ¨™ï¼šç¢ºä¿ one èˆ‡ fifteen è·é›¢éå¸¸é  ---
        const pts = [
            {x:450, y:650}, // 1. one (å·¦è…³å‰)
            {x:300, y:600}, // 2. two (å·¦è…³å¾Œ)
            {x:200, y:500}, // 3. three (å·¦å´è‡€éƒ¨)
            {x:180, y:350}, // 4. four (å·¦å´èƒŒéƒ¨)
            {x:250, y:200}, // 5. five (å·¦è€³æ ¹)
            {x:350, y:50},  // 6. six (å·¦è€³å°–)
            {x:550, y:150}, // 7. seven (é¡é ­å·¦)
            {x:700, y:130}, // 8. eight (é¡é ­ä¸­)
            {x:850, y:150}, // 9. nine (é¡é ­å³)
            {x:1050, y:50}, // 10. ten (å³è€³å°–)
            {x:1150, y:200},// 11. eleven (å³è€³æ ¹)
            {x:1220, y:350},// 12. twelve (å³å´èƒŒéƒ¨)
            {x:1200, y:500},// 13. thirteen (å³å´è‡€éƒ¨)
            {x:1050, y:600},// 14. fourteen (å³è…³å¾Œ)
            {x:900, y:650}, // 15. fifteen (å³è…³å‰) -- è·é›¢ one 450åƒç´ ï¼Œçµ•ä¸é‡ç–Š
            {x:950, y:450}, // 16. sixteen (å°¾å·´æ ¹éƒ¨)
            {x:1150, y:550},// 17. seventeen (å°¾å·´ä¸­æ®µ)
            {x:1300, y:500},// 18. eighteen (å°¾å·´å°–ç«¯)
            {x:1250, y:400},// 19. nineteen (å°¾å·´ä¸Šæ–¹)
            {x:1100, y:430} // 20. twenty (å°¾å·´æ”¶å°¾)
        ];

        let currentIdx = 0;
        let isDragging = false;
        let startPos = {x:0, y:0};

        const svg = document.getElementById('gameSvg');
        const lineLayer = document.getElementById('lineLayer');
        const dragLine = document.getElementById('dragLine');

        function playSound(text) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const u = new SpeechSynthesisUtterance(text);
                u.lang = 'en-US';
                u.rate = 0.8;
                window.speechSynthesis.speak(u);
            }
        }

        function startGame() {
            document.getElementById('start-overlay').style.display = 'none';
            playSound("Let's go!"); 
            init();
        }

        function init() {
            pts.forEach((p, i) => {
                const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
                const c = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                c.setAttribute("cx", p.x); c.setAttribute("cy", p.y); c.setAttribute("r", 15);
                c.setAttribute("id", "dot" + i);
                c.setAttribute("class", "dot");
                
                // æŒ‰ä¸‹é–‹å§‹æ‹–æ›³
                c.onmousedown = (e) => startDrag(i, e);
                // é»æ“Šç™¼éŸ³
                c.onclick = () => playSound(words[i]);

                const t = document.createElementNS("http://www.w3.org/2000/svg", "text");
                t.setAttribute("x", p.x); t.setAttribute("y", p.y - 35);
                t.setAttribute("text-anchor", "middle"); t.setAttribute("class", "num-text");
                t.textContent = words[i];

                g.appendChild(c); g.appendChild(t); svg.appendChild(g);
            });
            updateCurrentTarget();
        }

        function updateCurrentTarget() {
            // ç§»é™¤èˆŠçš„æ¨™è¨˜ï¼Œè¨­å®šæ–°çš„é»ƒè‰²èµ·é»
            document.querySelectorAll('.dot').forEach(d => d.classList.remove('current-start'));
            if(currentIdx < pts.length) {
                document.getElementById("dot" + currentIdx).classList.add("current-start");
            }
        }

        function startDrag(i, e) {
            if (i !== currentIdx) {
                playSound(words[i]); // é»éŒ¯ä¹Ÿç™¼éŸ³
                return;
            }
            isDragging = true;
            startPos = pts[i];
            dragLine.setAttribute("x1", startPos.x);
            dragLine.setAttribute("y1", startPos.y);
            dragLine.style.display = "block";
            
            window.addEventListener('mousemove', onDrag);
            window.addEventListener('mouseup', endDrag);
        }

        function onDrag(e) {
            if (!isDragging) return;
            const pt = svg.createSVGPoint();
            pt.x = e.clientX; pt.y = e.clientY;
            const loc = pt.matrixTransform(svg.getScreenCTM().inverse());
            dragLine.setAttribute("x2", loc.x);
            dragLine.setAttribute("y2", loc.y);
        }

        function endDrag(e) {
            if (!isDragging) return;
            isDragging = false;
            dragLine.style.display = "none";
            
            window.removeEventListener('mousemove', onDrag);
            window.removeEventListener('mouseup', endDrag);

            // æª¢æŸ¥æ”¾é–‹çš„ä½ç½®æ˜¯å¦åœ¨ä¸‹ä¸€å€‹æ­£ç¢ºçš„é»é™„è¿‘
            const pt = svg.createSVGPoint();
            pt.x = e.clientX; pt.y = e.clientY;
            const loc = pt.matrixTransform(svg.getScreenCTM().inverse());
            
            const nextIdx = currentIdx + 1;
            if (nextIdx < pts.length) {
                const dist = Math.sqrt(Math.pow(loc.x - pts[nextIdx].x, 2) + Math.pow(loc.y - pts[nextIdx].y, 2));
                if (dist < 40) { // åˆ¤å®šç¯„åœ
                    // é€£ç·šæˆåŠŸ
                    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    line.setAttribute("x1", pts[currentIdx].x);
                    line.setAttribute("y1", pts[currentIdx].y);
                    line.setAttribute("x2", pts[nextIdx].x);
                    line.setAttribute("y2", pts[nextIdx].y);
                    line.setAttribute("class", "line-segment");
                    lineLayer.appendChild(line);
                    
                    document.getElementById("dot" + currentIdx).classList.add("done");
                    playSound(words[nextIdx]);
                    currentIdx++;
                    updateCurrentTarget();
                    
                    if (currentIdx === pts.length - 1) {
                        document.getElementById("cat-final").style.display = "block";
                        playSound("Wonderful! A cute cat!");
                    }
                }
            }
        }
    </script>
</body>
</html>