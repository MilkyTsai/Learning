<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Êï∏Â≠óÈÄ£ÈÄ£Áúã - Èö®Ê©üÊåëÊà∞Áâà</title>
    <style>
        :root { --selected-color: #f1c40f; --correct-color: #2ecc71; --wrong-color: #e74c3c; --bg-color: #ecf0f1; }
        body { font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif; background-color: var(--bg-color); text-align: center; margin: 0; padding: 20px; }
        h1 { color: #2c3e50; font-size: 24px; margin-bottom: 5px; }
        p.hint { color: #7f8c8d; margin-bottom: 20px; font-size: 16px; }

        .game-container {
            display: flex; justify-content: space-between; max-width: 500px;
            margin: auto; background: white; padding: 20px; border-radius: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); position: relative; min-height: 450px;
        }

        .column { display: flex; flex-direction: column; gap: 15px; width: 45%; z-index: 2; }

        .item {
            padding: 10px; background-color: #3498db; color: white; border: none;
            border-radius: 15px; cursor: pointer; transition: all 0.2s;
            box-shadow: 0 5px #2980b9; display: flex; flex-direction: column;
            justify-content: center; align-items: center; height: 75px; position: relative;
        }
        
        .item-num { background-color: #e67e22; box-shadow: 0 5px #d35400; }

        .label-text { font-size: 26px; line-height: 1; margin: 0; pointer-events: none; }
        .quantity-icon { font-size: 14px; margin-top: 5px; opacity: 0; transition: opacity 0.5s; pointer-events: none; height: 20px; word-break: break-all; width: 90%; }

        .item.selected { background-color: var(--selected-color) !important; box-shadow: 0 5px #f39c12 !important; color: #2c3e50; }
        .item.matched { background-color: var(--correct-color) !important; box-shadow: none !important; cursor: default; }
        .item.matched .quantity-icon { opacity: 1; }
        .item.wrong-shake { animation: shake 0.5s; background-color: var(--wrong-color) !important; }

        #svg-lines { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .connection-line { stroke: var(--correct-color); stroke-width: 6; stroke-linecap: round; opacity: 0.6; }

        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 75% { transform: translateX(8px); } }
        .btn-bottom { margin-top: 20px; padding: 12px 30px; font-size: 18px; border-radius: 50px; border: none; background: #95a5a6; color: white; cursor: pointer; box-shadow: 0 5px #7f8c8d; }
    </style>
</head>
<body>

    <h1>Êï∏Â≠óÈÄ£ÈÄ£Áúã üéä</h1>
    <p class="hint">ÊØèÊ¨°Áé©È°åÁõÆÈÉΩ‰∏ç‰∏ÄÊ®£ÂñîÔºÅÂä†Ê≤πÔºÅ</p>

    <div class="game-container">
        <svg id="svg-lines"></svg>
        <div class="column" id="word-col"></div>
        <div class="column" id="num-col"></div>
    </div>

    <button class="btn-bottom" onclick="location.reload()">Êèõ‰∏ÄÁµÑÈ°åÁõÆ üîÑ</button>

    <script>
        const pairsData = [
            { id: 1, word: "One", num: "1", icon: "üçé" },
            { id: 2, word: "Two", num: "2", icon: "ü¶Üü¶Ü" },
            { id: 3, word: "Three", num: "3", icon: "‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è" },
            { id: 4, word: "Four", num: "4", icon: "üçÄüçÄüçÄüçÄ" },
            { id: 5, word: "Five", num: "5", icon: "üñêÔ∏è" },
            { id: 6, word: "Six", num: "6", icon: "üç≠üç≠üç≠üç≠üç≠üç≠" },
            { id: 7, word: "Seven", num: "7", icon: "üê±üê±üê±üê±üê±üê±üê±" },
            { id: 8, word: "Eight", num: "8", icon: "üéàüéàüéàüéàüéàüéàüéàüéà" },
            { id: 9, word: "Nine", num: "9", icon: "üçÑüçÑüçÑüçÑüçÑüçÑüçÑüçÑüçÑ" },
            { id: 10, word: "Ten", num: "10", icon: "üç¨üç¨üç¨üç¨üç¨üç¨üç¨üç¨üç¨üç¨" }
        ];

        let selectedWordBtn = null;
        let matchedCount = 0;
        let currentPairs = []; // ÂÑ≤Â≠òÁï∂ÂâçÊäΩ‰∏≠ÁöÑ 5 ÁµÑ
        let synth = window.speechSynthesis;
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        function playBeep(type) {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            if (type === 'success') {
                osc.type = 'sine'; osc.frequency.setValueAtTime(880, audioCtx.currentTime);
                gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
                osc.start(); osc.stop(audioCtx.currentTime + 0.3);
            } else if (type === 'wrong') {
                osc.type = 'sawtooth'; osc.frequency.setValueAtTime(150, audioCtx.currentTime);
                gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
                osc.start(); osc.stop(audioCtx.currentTime + 0.2);
            } else if (type === 'fanfare') {
                [523.25, 659.25, 783.99, 1046.50].forEach((freq, i) => {
                    const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
                    o.connect(g); g.connect(audioCtx.destination);
                    o.frequency.setValueAtTime(freq, audioCtx.currentTime + i * 0.15);
                    g.gain.setValueAtTime(0.1, audioCtx.currentTime + i * 0.15);
                    o.start(audioCtx.currentTime + i * 0.15); o.stop(audioCtx.currentTime + i * 0.15 + 0.4);
                });
            }
        }

        function speak(text) {
            if (synth.speaking) synth.cancel();
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'en-US'; msg.rate = 0.8;
            synth.speak(msg);
        }

        function init() {
            const wordCol = document.getElementById('word-col');
            const numCol = document.getElementById('num-col');

            // --- Èö®Ê©üÊåëÈÅ∏ 5 ÁµÑÁöÑÊ†∏ÂøÉÈÇèËºØ ---
            // 1. Êâì‰∫ÇÂéüÂßã 10 ÁµÑË≥áÊñô
            const shuffledFullList = [...pairsData].sort(() => Math.random() - 0.5);
            // 2. ÂèñÂâç 5 ÁµÑ‰ΩúÁÇ∫Êú¨Ê¨°ÈÅäÊà≤È°åÁõÆ
            currentPairs = shuffledFullList.slice(0, 5);

            // 3. ÂàÜÂà•Êâì‰∫ÇÈÄô 5 ÁµÑÁöÑ„ÄåÂñÆÂ≠ó„ÄçËàá„ÄåÊï∏Â≠ó„ÄçÈ†ÜÂ∫è
            const shuffledWords = [...currentPairs].sort(() => Math.random() - 0.5);
            const shuffledNums = [...currentPairs].sort(() => Math.random() - 0.5);

            shuffledWords.forEach(data => {
                const btn = document.createElement('button');
                btn.className = 'item item-word';
                btn.innerHTML = `<span class="label-text">${data.word}</span>`;
                btn.dataset.id = data.id;
                btn.onclick = () => {
                    if (audioCtx.state === 'suspended') audioCtx.resume();
                    speak(data.word);
                    if (selectedWordBtn) selectedWordBtn.classList.remove('selected');
                    btn.classList.add('selected');
                    selectedWordBtn = btn;
                };
                wordCol.appendChild(btn);
            });

            shuffledNums.forEach(data => {
                const btn = document.createElement('button');
                btn.className = 'item item-num';
                btn.innerHTML = `<span class="label-text">${data.num}</span><span class="quantity-icon">${data.icon}</span>`;
                btn.dataset.id = data.id;
                btn.onclick = () => {
                    if (!selectedWordBtn || btn.classList.contains('matched')) return;
                    if (selectedWordBtn.dataset.id === btn.dataset.id) {
                        playBeep('success');
                        selectedWordBtn.classList.add('matched');
                        btn.classList.add('matched');
                        drawLine(selectedWordBtn, btn);
                        matchedCount++;
                        selectedWordBtn = null;
                        if (matchedCount === 5) { // Âõ†ÁÇ∫Âõ∫ÂÆöÂè™Êúâ 5 ÁµÑ
                            setTimeout(() => playBeep('fanfare'), 500);
                            setTimeout(() => speak("Excellent! You are so smart!"), 1200);
                        }
                    } else {
                        playBeep('wrong');
                        btn.classList.add('wrong-shake');
                        selectedWordBtn.classList.add('wrong-shake');
                        setTimeout(() => {
                            btn.classList.remove('wrong-shake');
                            selectedWordBtn.classList.remove('wrong-shake');
                            selectedWordBtn.classList.remove('selected');
                            selectedWordBtn = null;
                        }, 500);
                    }
                };
                numCol.appendChild(btn);
            });
        }

        function drawLine(btn1, btn2) {
            const svg = document.getElementById('svg-lines');
            const rect1 = btn1.getBoundingClientRect();
            const rect2 = btn2.getBoundingClientRect();
            const containerRect = document.querySelector('.game-container').getBoundingClientRect();
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('x1', rect1.left + rect1.width / 2 - containerRect.left);
            line.setAttribute('y1', rect1.top + rect1.height / 2 - containerRect.top);
            line.setAttribute('x2', rect2.left + rect2.width / 2 - containerRect.left);
            line.setAttribute('y2', rect2.top + rect2.height / 2 - containerRect.top);
            line.setAttribute('class', 'connection-line');
            svg.appendChild(line);
        }

        init();
    </script>
</body>
</html>