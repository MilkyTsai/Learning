<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>Hello Song æ‰‹é›»ç­’æ¢éšª - èªéŸ³å¼·åŒ–ç‰ˆ</title>
    <style>
        body { margin: 0; overflow: hidden; background: #050a10; font-family: 'Arial Rounded MT Bold', 'Microsoft JhengHei', sans-serif; cursor: none; }
        
        #game-area {
            position: relative; width: 100vw; height: 100vh;
            background-image: url('https://images.unsplash.com/photo-1441974231531-c6227db76b6e?auto=format&fit=crop&w=1350&q=80');
            background-size: cover; background-position: center;
        }

        #mask {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95);
            mask-image: radial-gradient(circle 100px at var(--x, 50%) var(--y, 50%), transparent 100%, black 100%);
            -webkit-mask-image: radial-gradient(circle 100px at var(--x, 50%) var(--y, 50%), transparent 100%, black 100%);
        }

        .word {
            position: absolute; font-size: 32px; color: rgba(255,255,255,0); 
            cursor: pointer; transition: color 0.3s, transform 0.3s, text-shadow 0.3s;
            user-select: none; font-weight: bold;
        }
        
        /* é è¿‘æ‰‹é›»ç­’æ™‚çš„æ•ˆæœ */
        .word.peek { color: rgba(255, 255, 255, 0.6); text-shadow: 0 0 15px #fff; transform: scale(1.1); }
        .word.found { color: #f1c40f !important; text-shadow: 0 0 25px #f1c40f; transform: scale(1.4); pointer-events: none; z-index: 10; }

        #ui {
            position: fixed; top: 20px; left: 20px; color: white; z-index: 100;
            background: rgba(0,0,0,0.6); padding: 20px; border-radius: 20px; pointer-events: none;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .target { display: block; margin-bottom: 8px; opacity: 0.3; font-size: 20px; transition: all 0.5s; }
        .target.done { opacity: 1; color: #f1c40f; transform: translateX(10px); }

        #flashlight {
            position: fixed; width: 50px; height: 50px; border: 3px solid white;
            border-radius: 50%; pointer-events: none; z-index: 1000;
            transform: translate(-50%, -50%); box-shadow: 0 0 30px white;
        }
    </style>
</head>
<body>

    <div id="ui">
        <h2 style="margin:0 0 15px 0;">ğŸ”¦ æ‰¾åˆ°å–®å­—ä¸¦å­¸ç¿’å§ï¼</h2>
        <div id="list">
            <span class="target" id="t-hello">â— Hello (å¦³å¥½)</span>
            <span class="target" id="t-school">â— school (å­¸æ ¡)</span>
            <span class="target" id="t-friends">â— friends (æœ‹å‹)</span>
            <span class="target" id="t-play">â— play (ç©è€)</span>
            <span class="target" id="t-name">â— name (åå­—)</span>
        </div>
    </div>

    <div id="flashlight"></div>

    <div id="game-area">
        <div id="mask"></div>
    </div>

    <script>
        const gameArea = document.getElementById('game-area');
        const mask = document.getElementById('mask');
        const flashlight = document.getElementById('flashlight');
        
        const wordData = [
            { en: 'Hello', zh: 'å¦³å¥½' },
            { en: 'school', zh: 'å­¸æ ¡' },
            { en: 'friends', zh: 'æœ‹å‹' },
            { en: 'play', zh: 'ç©è€' },
            { en: 'name', zh: 'åå­—' }
        ];
        
        const fakes = ['Apple', 'Cat', 'Dog', 'Book', 'Sun', 'Boy', 'Girl'];
        let foundCount = 0;
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        // æ»‘é¼ åµæ¸¬
        window.addEventListener('mousemove', e => {
            const x = e.clientX, y = e.clientY;
            mask.style.setProperty('--x', x + 'px');
            mask.style.setProperty('--y', y + 'px');
            flashlight.style.left = x + 'px';
            flashlight.style.top = y + 'px';

            document.querySelectorAll('.word').forEach(w => {
                const rect = w.getBoundingClientRect();
                const dx = x - (rect.left + rect.width / 2);
                const dy = y - (rect.top + rect.height / 2);
                if (Math.sqrt(dx*dx + dy*dy) < 110 && !w.classList.contains('found')) {
                    w.classList.add('peek');
                } else {
                    w.classList.remove('peek');
                }
            });
        });

        // éŒ¯èª¤éŸ³æ•ˆ
        function playWrongSound() {
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(120, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            osc.start(); osc.stop(audioCtx.currentTime + 0.2);
        }

        // å¼·åŒ–çš„èªéŸ³æ’­æ”¾ (å¿µä¸‰æ¬¡è‹±æ–‡ + ä¸€æ¬¡ä¸­æ–‡)
        function speakWordChain(en, zh) {
            window.speechSynthesis.cancel();
            
            // å»ºç«‹è‹±æ–‡èªéŸ³ (3æ¬¡)
            for (let i = 0; i < 3; i++) {
                const msgEn = new SpeechSynthesisUtterance(en);
                msgEn.lang = 'en-US';
                msgEn.rate = 0.8;
                msgEn.volume = 1.0;
                // è¨­å®šå»¶æ™‚æ•ˆæœ
                setTimeout(() => window.speechSynthesis.speak(msgEn), i * 1200);
            }

            // å»ºç«‹ä¸­æ–‡èªéŸ³ (1æ¬¡)
            const msgZh = new SpeechSynthesisUtterance(zh);
            msgZh.lang = 'zh-TW';
            msgZh.rate = 0.9;
            setTimeout(() => window.speechSynthesis.speak(msgZh), 3 * 1200);
        }

        function createWords() {
            wordData.forEach(item => {
                const el = document.createElement('div');
                el.className = 'word';
                el.textContent = item.en;
                placeRandomly(el);
                el.onclick = () => {
                    if (audioCtx.state === 'suspended') audioCtx.resume();
                    el.classList.add('found');
                    document.getElementById('t-' + item.en.toLowerCase()).classList.add('done');
                    speakWordChain(item.en, item.zh);
                    foundCount++;
                    if (foundCount === wordData.length) {
                        setTimeout(() => {
                            const finish = new SpeechSynthesisUtterance("Amazing! You found all words!");
                            window.speechSynthesis.speak(finish);
                        }, 5000);
                    }
                };
                gameArea.appendChild(el);
            });

            fakes.forEach(text => {
                const el = document.createElement('div');
                el.className = 'word fake';
                el.textContent = text;
                placeRandomly(el);
                el.onclick = () => {
                    if (audioCtx.state === 'suspended') audioCtx.resume();
                    playWrongSound();
                };
                gameArea.appendChild(el);
            });
        }

        function placeRandomly(el) {
            el.style.left = (Math.random() * 70 + 15) + 'vw';
            el.style.top = (Math.random() * 70 + 15) + 'vh';
        }

        createWords();
    </script>
</body>
</html>